{% extends "layout/base.html" %}

{% block title %}ë§¤ë§¤ ë‚´ì—­ ë¶„ì„{% endblock %}

{% block head_css %}
<style>
    .filter-container {
        display: flex;
        gap: 15px;
        align-items: center;
        margin-bottom: 20px;
    }
    .kpi-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }
    .kpi-card {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        text-align: center;
    }
    .kpi-card .value {
        font-size: 1.8em;
        font-weight: bold;
    }
    .kpi-card .label {
        font-size: 0.9em;
        color: #777;
        margin-top: 5px;
    }
    .chart-container-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}
<h2>ğŸ“Š ë§¤ë§¤ ë‚´ì—­ ë¶„ì„</h2>

<div class="panel">
    <h3>ì¡°íšŒ ì¡°ê±´</h3>
    <div class="filter-container">
        <label for="start_date">ì‹œì‘ì¼:</label>
        <input type="date" id="start_date" name="start_date" value="2025-07-01">
        <label for="end_date">ì¢…ë£Œì¼:</label>
        <input type="date" id="end_date" name="end_date" value="2025-08-01">
        <button class="btn-primary" style="padding: 8px 15px;">ì¡°íšŒ</button>
    </div>
</div>

<div class="kpi-grid" style="margin-top: 20px;">
    <div class="kpi-card">
        <div class="value text-green">+ 2,530,000 ì›</div>
        <div class="label">ì´ ì‹¤í˜„ ì†ìµ</div>
    </div>
    <div class="kpi-card">
        <div class="value">152 íšŒ</div>
        <div class="label">ì´ ë§¤ë§¤ íšŸìˆ˜</div>
    </div>
    <div class="kpi-card">
        <div class="value text-green">68.4 %</div>
        <div class="label">ìŠ¹ë¥ </div>
    </div>
    <div class="kpi-card">
        <div class="value">1.85</div>
        <div class="label">í‰ê·  ì†ìµë¹„</div>
    </div>
</div>

<div class="chart-container-grid">
    <div class="panel">
        <h3>ì›”ë³„ ì†ìµ</h3>
        <canvas id="monthlyProfitChart"></canvas>
    </div>
    <div class="panel">
        <h3>ìˆ˜ìµ/ì†ì‹¤ ê±°ë˜</h3>
        <canvas id="winLossPieChart"></canvas>
    </div>
</div>

<div class="panel">
    <h3>ìƒì„¸ ë§¤ë§¤ ë‚´ì—­</h3>
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>ë§¤ë„ì¼ì</th>
                    <th>ì¢…ëª©ëª…</th>
                    <th class="align-right">ë§¤ìˆ˜ê¸ˆì•¡</th>
                    <th class="align-right">ë§¤ë„ê¸ˆì•¡</th>
                    <th class="align-right">ì‹¤í˜„ì†ìµ</th>
                    <th class="align-right">ìˆ˜ìµë¥ (%)</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>2025-08-01</td>
                    <td>ì‚¼ì„±ì „ì</td>
                    <td class="align-right">9,010,000</td>
                    <td class="align-right">9,150,000</td>
                    <td class="align-right text-green">+140,000</td>
                    <td class="align-right text-green">+1.55%</td>
                </tr>
                 <tr>
                    <td>2025-07-30</td>
                    <td>LGì—ë„ˆì§€ì†”ë£¨ì…˜</td>
                    <td class="align-right">4,500,000</td>
                    <td class="align-right">4,410,000</td>
                    <td class="align-right text-red">-90,000</td>
                    <td class="align-right text-red">-2.00%</td>
                </tr>
                <tr>
                    <td>2025-07-28</td>
                    <td>í•˜ì´ë¸Œ</td>
                    <td class="align-right">2,050,000</td>
                    <td class="align-right">2,180,000</td>
                    <td class="align-right text-green">+130,000</td>
                    <td class="align-right text-green">+6.34%</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // ì´ í˜ì´ì§€ì˜ ì°¨íŠ¸ë¥¼ ê·¸ë¦¬ê¸° ìœ„í•œ Javascript ì½”ë“œ
    // ì‹¤ì œë¡œëŠ” ì¡°íšŒ ë²„íŠ¼ í´ë¦­ ì‹œ APIë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ ë°›ì•„ì˜¨ í›„ ì°¨íŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.
    document.addEventListener('DOMContentLoaded', () => {
        // ì›”ë³„ ì†ìµ ë°” ì°¨íŠ¸ (ì˜ˆì‹œ)
        const ctxBar = document.getElementById('monthlyProfitChart').getContext('2d');
        new Chart(ctxBar, {
            type: 'bar',
            data: {
                labels: ['6ì›”', '7ì›”', '8ì›”'],
                datasets: [{
                    label: 'ì›”ë³„ ì‹¤í˜„ ì†ìµ (ì›)',
                    data: [1200000, 2530000, 850000],
                    backgroundColor: ['#3498db', '#2ecc71', '#e74c3c'],
                }]
            }
        });

        // ìŠ¹ë¥  íŒŒì´ ì°¨íŠ¸ (ì˜ˆì‹œ)
        const ctxPie = document.getElementById('winLossPieChart').getContext('2d');
        new Chart(ctxPie, {
            type: 'pie',
            data: {
                labels: ['ìˆ˜ìµ ê±°ë˜', 'ì†ì‹¤ ê±°ë˜'],
                datasets: [{
                    data: [104, 48], // 152íšŒ ë§¤ë§¤ ì¤‘ 104íšŒ ìˆ˜ìµ
                    backgroundColor: ['#2ecc71', '#e74c3c'],
                }]
            }
        });
    });
</script>
{% endblock %}